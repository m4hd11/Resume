{% extends 'base.html' %}
{% load static %}
{% load blog_tags %}
{% load humanize %}
{% block title %}{{ post.title }}{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'assets/css/single.css' %}" />
{% endblock %}
{% block content %}

<div class="blog-single-page">
  {% include 'blog/header.html' %}

  <main class="main">
    <!-- Page Header -->
    <div class="page-header">
      <div class="container">
        <nav class="breadcrumb-nav" data-aos="fade-up">
          <ol>
            <li><a href="{% url 'website:index' %}">Home</a></li>
            <li><a href="{% url 'blog:blog-home' %}">Blog</a></li>
            <li class="current">{{ post.title }}</li>
          </ol>
        </nav>
      </div>
    </div>
    <!-- End Page Header -->

    <!-- Blog Single Section -->
    <section class="blog-single section">
      <div class="container">
        <div class="row">
          <!-- Main Content -->
          <div class="col-lg-8">
            <!-- Post Content -->
            <article class="post-single-content" data-aos="fade-up">
              <div class="post-featured-image">
                <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid" />
              </div>

              <div class="post-meta-info">
                <div class="meta-item">
                  <i class="bi bi-person"></i>
                  <a href="#">{{ post.author.get_full_name }}</a>
                </div>
                <div class="meta-item">
                  <i class="bi bi-calendar"></i>
                  <span>{{ post.published_date | date:"d M Y" }}</span>
                </div>
                <div class="meta-item">
                  <i class="bi bi-eye"></i>
                  <span>{{ post.counted_views }} Views</span>
                </div>
                <div class="meta-item">
                  <i class="bi bi-chat-dots"></i>
                  <a href="#comments">{{ comments|length }} Comments</a>
                </div>
              </div>

              <div class="post-body">
                <div class="post-categories">
                  {% for cat in post.category.all %}
                  <a href="{% url 'blog:category' cat_name=cat.name %}" class="category-badge">{{ cat.name }}</a>{% if not forloop.last %}, {% endif %}
                  {% endfor %}
                </div>

                <h1 class="post-title">{{ post.title }}</h1>

                <div class="post-content">{{ post.content|safe }}</div>

                <div class="social-share">
  <h5>Share this post:</h5>
  <div class="social-links d-flex gap-2">
    <!-- Facebook -->
    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" title="Share on Facebook">
      <i class="bi bi-facebook"></i>
    </a>

    <!-- Twitter -->
    <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}" target="_blank" title="Share on Twitter">
      <i class="bi bi-twitter"></i>
    </a>

    <!-- LinkedIn -->
    <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" target="_blank" title="Share on LinkedIn">
      <i class="bi bi-linkedin"></i>
    </a>

    <!-- WhatsApp -->
    <a href="https://api.whatsapp.com/send?text={{ post.title }}%20{{ request.build_absolute_uri }}" target="_blank" title="Share on WhatsApp">
      <i class="bi bi-whatsapp"></i>
    </a>
  </div>
</div>

              </div>
            </article>

            <!-- Post Navigation -->
            <div class="post-navigation" data-aos="fade-up">
              {% if prev_post %}
              <a href="{% url 'blog:single' pid=prev_post.id %}" class="nav-post prev">
                <div class="nav-post-thumb">
                  <img src="{{ prev_post.image.url }}" alt="Previous Post" />
                </div>
                <div class="nav-post-info">
                  <h6>← Previous Post</h6>
                  <h4>{{ prev_post.title }}</h4>
                </div>
              </a>
              {% endif %}

              {% if next_post %}
              <a href="{% url 'blog:single' pid=next_post.id %}" class="nav-post next">
                <div class="nav-post-thumb">
                  <img src="{{ next_post.image.url }}" alt="Next Post" />
                </div>
                <div class="nav-post-info">
                  <h6>Next Post →</h6>
                  <h4>{{ next_post.title }}</h4>
                </div>
              </a>
              {% endif %}
            </div>

            <!-- Comments Section -->
            <div class="comments-section" id="comments" data-aos="fade-up">
              <h3 class="section-title">12 Comments</h3>

              <div class="comment-item">
                <div class="comment-header">
                  <div class="comment-avatar">A</div>
                  <div class="comment-meta">
                    <h5>Ahmad Rezaei</h5>
                    <span class="comment-date">2 hours ago</span>
                  </div>
                </div>
                <p class="comment-text">
                  Great article! Very helpful for beginners like me. Looking forward to more Django tutorials.
                </p>
              </div>
            </div>

            <!-- Comment Form -->
            <div class="comment-form-section" data-aos="fade-up">
              <h3 class="section-title">Leave a Comment</h3>

              <form method="post" class="comment-form">
                <div class="row mb-3">
                  <div class="col-md-6 mb-3 mb-md-0">
                    <input type="text" class="form-control" name="name" placeholder="Your Name" required />
                  </div>
                  <div class="col-md-6">
                    <input type="email" class="form-control" name="email" placeholder="Your Email" required />
                  </div>
                </div>

                <div class="mb-3">
                  <input type="text" class="form-control" name="subject" placeholder="Subject" required />
                </div>

                <div class="mb-4">
                  <textarea class="form-control" name="message" placeholder="Your Comment" required></textarea>
                </div>

                <button type="submit" class="submit-btn">Post Comment</button>
              </form>
            </div>
          </div>
          <!-- End Main Content -->

          <!-- Sidebar -->
          <div class="col-lg-4 sidebar">
            <div class="sidebar-item search-form" data-aos="fade-left" data-aos-delay="100">

            <!-- Author Widget -->
            {% include 'blog/blog-writer.html' %}

            <!-- Search Widget -->
            {% include 'blog/blog-search.html' %}

            <!-- Recent Posts Widget -->
            {% include 'blog/blog-recent-posts.html' %}

            <!-- Categories Widget -->
            {% include 'blog/blog-post-categories.html' %}

            <!-- Tags Widget -->
            {% include 'blog/blog-tags.html' %}
          </div>
          </div>
          <!-- End Sidebar -->
        </div>
      </div>
    </section>
    <!-- End Blog Single Section -->
  </main>
</div>
{% endblock %}
